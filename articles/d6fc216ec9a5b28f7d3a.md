---
title: "ã€Pythonã€‘PyPI ã«è‡ªä½œãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ç™»éŒ²ã™ã‚‹æ‰‹é †ã¾ã¨ã‚"
emoji: "ğŸ"
type: "tech"
topics:  ["Python", "PyPI"]
published: true
---

å¤šåˆ† [Python Packaging User Guide](https://packaging.python.org/tutorials/packaging-projects/) ã‚’èª­ã‚€ã®ãŒä¸€ç•ªæ—©ã„ã¨æ€ã„ã¾ã™ã€‚
ï¼ˆå‰²ã¨googleç¿»è¨³ã§ã‚‚ã¡ã‚ƒã‚“ã¨æ—¥æœ¬èªãŒæˆã‚Šç«‹ã£ã¦ã¦é©šã„ãŸï¼‰

ãŒã€ç–‘å•ã¨ã‹æ‰‹é †ã®è¿½åŠ /å…¥ã‚Œæ›¿ãˆãŒã„ãã‚‰ã‹ç™ºç”Ÿã—ãŸã®ã§ãƒ¡ãƒ¢ã€‚
â€» GitHub ã«ãƒªãƒã‚¸ãƒˆãƒªã‚’ç½®ãã®ãŒå‰æã§ã™ã€‚

# æ‰‹é †

ä»¥ä¸‹ã€echidna ã¨ã„ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã®å ´åˆã€‚

## PyPI ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ² 

[TestPyPI](https://test.pypi.org/) ã¨ [PyPI](https://pypi.org/) ã®ä¸¡æ–¹ã«ç™»éŒ²
https://test.pypi.org/user/1ntegrale9/
https://pypi.org/user/1ntegrale9/

## GitHubã§ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œã‚‹

è¨­å®šã¯ä»¥ä¸‹ã®é€šã‚Šã€‚
- Public
- Initialize this repository with a README
- Add .gitignore: Python
- Add a license: MIT License

ä½œã£ãŸã‚‰ãƒ­ãƒ¼ã‚«ãƒ«ã« `git clone` ã—ã¦ãŠãã€‚

## å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
$ python3 -m pip install --user --upgrade setuptools wheel twine
```
`setuptools` ã¨ `wheel` ã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ³ã‚°ç”¨
`twine`ã¯PyPIã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ç”¨

## ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ä½œæˆ 

```bash
$ mkdir echidna
$ touch echidna/__init__.py
```

ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®åå‰ã§importã™ã‚‹ã“ã¨ã«ãªã‚‹ã€‚
`echidna/__init__.py` ã®ä¸­èº«ã¯

```python
name = "echidna"
```

ã¨è¨˜è¿°ã—ã¦ãŠãã€‚
å¾Œã§ä»¥ä¸‹ã‚’è©¦ã™ã“ã¨ã«ãªã‚‹ã€‚

```python
import echidna
echidna.name
```

## setup.py ã®ä½œæˆ

`setup.py` ã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã€‚

[Creating setup.py  Python Packaging User Guide](https://packaging.python.org/tutorials/packaging-projects/#creating-setup-py)
ã®ã‚µãƒ³ãƒ—ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã¡ã‚‡ã£ã¨æ›¸ãæ›ãˆã‚‹ã€‚

```python
import setuptools

with open("README.md", "r") as fh:
    long_description = fh.read()

setuptools.setup(
    name="echidna",
    version="0.0.1",
    author="1ntegrale9",
    author_email="1ntegrale9uation@gmail.com",
    description="BOT and CLI framework for handling multiple services in python",
    long_description=long_description,
    long_description_content_type="text/markdown",
    url="https://github.com/1ntegrale9/echidna",
    packages=setuptools.find_packages(),
    classifiers=[
        "Programming Language :: Python :: 3.7",
        "License :: OSI Approved :: MIT License",
        "Operating System :: OS Independent",
    ],
)
```

`author` `author_email`ã¯å½“ç„¶å„å€‹äººã§é•ã†ã®ã§è‡ªåˆ†ã®ã‚‚ã®ã‚’ã€‚
`name`ã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã«ã€‚
`description`ã¯é©å½“ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ç°¡å˜ãªèª¬æ˜ã‚’ã€‚
`url`ã¯GitHubã®URLã§ã‚ˆã„ã€‚
`classifiers`ã¯æ›¸ãæ›ãˆã‚‹å¿…è¦ãªã•ãã†ã ã£ãŸã‘ã‚Œã©ã‚‚ã€
Python3ç³»å…¨ä½“ä¿è¨¼ã™ã‚‹ã®ã¯æ€–ã‹ã£ãŸã®ã§3.7ã«é™å®šã—ã¦ãŠã„ãŸã€‚

## ãƒ­ãƒ¼ã‚«ãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

setup.py ãŒã‚ã‚Œã° pip install ã¨åŒã˜ã“ã¨ãŒãƒ­ãƒ¼ã‚«ãƒ«ã§ã§ãã‚‹ã€‚
ï¼ˆ `build` `dist` `egg-info` ã®ä½œæˆã‚‚ç™ºç”Ÿã™ã‚‹ï¼‰

```bash
$ python3 setup.py install
```

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ããŸã‚‰ä»¥ä¸‹ã‚’è©¦ã™ã€‚

```bash
$ python3
>>> import echidna
>>> echidna.name
'echidna'
```

å¤§ä¸ˆå¤«ãªã‚‰ä¸€æ—¦ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠãã€‚

```bash
python3 -m pip uninstall echidna
```

 `build` `dist` `egg-info` ã‚‚æ¶ˆã—ã¦ãŠãã€‚

## PyPIã¸ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

ã¾ãšã¯å…¬å¼ã®ã‚³ãƒãƒ³ãƒ‰ã«å¾“ã£ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ³ã‚°

```bash
$ python3 setup.py sdist bdist_wheel
```

TestPyPIã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹

```bash
$ python3 -m twine upload --repository-url https://test.pypi.org/legacy/ dist/*
```

ã“ã®æ™‚ TestPyPI ã® username ã¨ password ã®å…¥åŠ›ã‚’æ±‚ã‚ã‚‰ã‚Œã‚‹

```bash
Enter your username:
Enter your password:
```

ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã§ããŸã‚‰ã€TestPyPI ã‹ã‚‰ pip install ã—ã¦ã¿ã‚‹

```bash
$ python3 -m pip install --index-url https://test.pypi.org/simple/ --no-deps echidna
```

å¤§ä¸ˆå¤«ãã†ãªã‚‰uninstallã—ã¦ãŠãã€‚

```bash
python3 -m pip uninstall echidna
```

PyPIã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

```bash
$ python3 -m twine upload dist/*
``` 

pip install ã—ã¦ã¿ã‚‹ã€‚

```
python3 -m pip install echidna
```

ãŠã‚ã‚Šã€‚

# è£œè¶³
TestPyPI ã«ç™»éŒ²ã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä¸€æ—¦å‰Šé™¤ã—ã¦å†åº¦ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ç›´ãã†ã¨ã—ãŸã‚‰ã€
å‰Šé™¤ã—ã¦ã‚‚åå‰ç©ºé–“ãŒä¿æŒã•ã‚Œã¦ã¦ã§ããªã‹ã£ãŸï¼ˆã‚ˆãè€ƒãˆã‚Œã°å½“ãŸã‚Šå‰ï¼‰
ä½•ã‹ã—ã‚‰ãƒŸã‚¹ã£ã¦ã‚‚å‰Šé™¤ã¯ã—ãªã„æ–¹ãŒã‚ˆã„ã€‚
